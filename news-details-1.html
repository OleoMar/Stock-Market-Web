<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaWave - Federal Reserve Signals Rate Changes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="geolocation-service.js"></script>
    <script src="location-components.js"></script>
    <script src="auth.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #f5f5f5;
            font-family: 'Quicksand', sans-serif;
            color: #333;
        }

        .dashboard-page {
            background: #1a1a1a;
            min-height: 100vh;
            color: white;
        }

        .navbar { 
            background: #1a1a1a;
            padding: 5px 0;
            border-bottom: 1px solid #333;
            height: 75px;
            display: flex;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            width: 100%;
        }

        .navbar .container-fluid {
            display: flex;
            align-items: center; 
            justify-content: space-between;
            width: 100%;
            padding:  0 30px;
            flex-wrap: nowrap;
        }

        .navbar-brand { 
            color: white !important;
            font-weight: bold;
            font-size: 35px;
            display: flex;
            align-items: center; 
            padding: 0;
            text-decoration: none;
            font-family: 'Quicksand', sans-serif;
        }

        .search-container { 
            flex: 1;
            max-width: 450px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .search-input {
            width: 100%;
            max-width: 450px;
            height: 43px;
            padding: 10px 40px 10px 15px;
            border: 1px solid #444;
            border-radius: 9px;
            background: white;
            color: #333;
            font-family: 'Quicksand', sans-serif;
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            cursor: pointer;
        }

        /* Search Results Dropdown */
        .search-results-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            max-height: 400px;
            overflow-y: auto;
            z-index: 1001;
            display: none;
            margin-top: 5px;
        }

        .search-results-dropdown.show {
            display: block;
        }

        .search-result-item {
            padding: 12px 16px;
            color: #333;
            cursor: pointer;
            transition: background 0.2s ease;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item:hover {
            background: #f8f9fa;
        }

        .search-result-info {
            flex: 1;
        }

        .search-result-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 2px;
        }

        .search-result-symbol {
            font-size: 12px;
            color: #666;
        }

        .search-result-exchange {
            font-size: 11px;
            color: #999;
            padding: 2px 6px;
            background: #f0f0f0;
            border-radius: 4px;
        }

        .search-loading {
            padding: 20px;
            text-align: center;
            color: #666;
            font-style: italic;
        }

        .search-no-results {
            padding: 20px;
            text-align: center;
            color: #666;
        }

        .search-error {
            padding: 20px;
            text-align: center;
            color: #f44336;
            font-size: 14px;
        }

        .navbar-right { 
            display: flex;
            align-items: center; 
            padding: 0;
            gap: 30px;
            position: relative;
            z-index: 2;
        }

        .location-selector {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 15px;
            border-radius: 9px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Quicksand', sans-serif;
            min-width: 80px;
            height: 42px;
            align-items: center;
            justify-content: space-between;
        }

        .location-selector:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .location-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 200px;
            z-index: 1001;
            display: none;
            margin-top: 5px;
        }

        .location-dropdown.show {
            display: block;
        }

        .location-option {
            padding: 12px 16px;
            color: #333;
            cursor: pointer;
            transition: background 0.2s ease;
            font-size: 13px;
            border-bottom: 1px solid #f0f0f0;
        }

        .location-option:last-child {
            border-bottom: none;
        }

        .location-option:hover {
            background: #f8f9fa;
        }

        .location-option.active {
            background: #e3f2fd;
            color: #1976d2;
            font-weight: 600;
        }

        .flag {
            display: inline-block;
            width: 20px;
            height: 15px;
            background: #666;
            border-radius: 2px;
            margin-right: 8px;
            text-align: center;
            font-size: 10px;
            line-height: 15px;
            color: white;
        }

        .market-status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: 10px;
        }

        .market-status.open {
            background: #4CAF50;
            color: white;
        }

        .market-status.closed {
            background: #f44336;
            color: white;
        }

        .pro-badge {
             background: #D9D9D9;
            color: #333;
            padding: 8px 20px;
            border-radius: 9px;
            text-decoration: none;
            font-weight: 600;
            border: none;
            font-family: 'Quicksand', sans-serif;
            font-size: 20px;
            width: 84px;
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .navbar-right i.fa-bell { 
            color: white;
            font-size: 30px;
        }

        .refresh-stocks-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ccc;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 8px;
            font-family: 'Quicksand', sans-serif;
        }

        .refresh-stocks-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .refresh-stocks-btn.loading {
            pointer-events: none;
            opacity: 0.6;
        }

        .refresh-stocks-btn i {
            margin-right: 3px;
        }

        .refresh-stocks-btn.loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .search-input {
                width: 300px;
            }
            
            .navbar-brand {
                font-size: 24px;
            }

            .location-selector {
                display: none;
            }
        }

        .main-layout {
            display: flex;
            margin-top: 99px;
        }

        .main-layout {
            display: flex;
            margin-top: 75px;
        }

        .sidebar { 
            width: 250px; 
            background: white;
            height: calc(100vh - 70px);
            padding: 30px 0;
            border-right: 1px solid #333;
            position: fixed;
            left: 0;
            top: 70px;
            background-image: url('images/navi.png');
            background-size: cover;
            background-position: center bottom;
            background-repeat: no-repeat;
            z-index: 10;
        }

        .sidebar-nav {
            list-style: none;
            padding: 0;
        }

        .sidebar-nav li {
            margin: 5px 0;
        }

        .sidebar-nav a {
            display: block;
            padding: 15px 30px;
            color: #1C1C1C;
            text-decoration: none;
            transition: all 0.3s;
            font-weight: 500;
            font-family: 'Quicksand', sans-serif;
        }

        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background: #2a2a2a;
            color: white;
            font-weight: bold;
        }

        .content { 
            flex: 1;
            padding: 30px;
            background: #f5f5f5;
            color: #333;
            min-height: calc(100vh - 99px);
            font-family: 'Quicksand', sans-serif;
            margin-left: 250px; 
        }

        .article-title {
            font-size: 48px;
            font-weight: 600;
            color: #333;
            margin-bottom: 40px;
            font-family: 'Quicksand', sans-serif;
        }

        .article-container {
            background: #2a2a2a;
            border-radius: 20px;
            padding: 40px;
            color: white;
            display: flex;
            gap: 40px;
            align-items: flex-start;
        }

        .article-text {
            flex: 1;
        }

        .article-paragraph {
            font-size: 16px;
            line-height: 1.6;
            color: white;
            margin-bottom: 20px;
            font-family: 'Quicksand', sans-serif;
        }

        .video-container {
            width: 400px;
            height: 400px;
            border-radius: 10px;
            overflow: hidden;
            background: #1a1a1a;
            position: relative;
            flex-shrink: 0;
        }

        .video-content {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .video-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, transparent 60%, rgba(0,0,0,0.7) 100%);
        }

        .video-header {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 11px;
            color: white;
            font-weight: 600;
            text-align: center;
        }

        .market-data {
            position: absolute;
            bottom: 50px;
            left: 10px;
            right: 10px;
            color: white;
            font-size: 12px;
            font-family: 'Quicksand', sans-serif;
        }

        .market-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3px;
        }

        .market-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .market-value {
            color: #4CAF50;
            font-weight: 600;
        }

        .market-ticker {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.9);
            padding: 8px 10px;
            font-size: 10px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .chart-image {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
        }

        .chart-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        @media (max-width: 1024px) {
            .article-container {
                flex-direction: column;
            }
            
            .video-container {
                width: 100%;
                max-width: 500px;
                margin: 0 auto;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                top: 0;
                left: 0;
                min-height: auto;
            }

            .content {
                margin-left: 0; 
            }

            .main-layout {
                flex-direction: column;
            }

            .article-title {
                font-size: 32px;
            }

            .content {
                padding: 20px;
            }

            .article-container {
                padding: 20px;
            }
        }
        @media (max-width: 576px) {
            .content {
                margin-left: 0;
            }
        }

        .delete-modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .delete-modal-overlay.show {
            display: block;
            opacity: 1;
        }
        .delete-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            padding: 32px 28px;
            font-family: 'Quicksand', sans-serif;
            color: #111;
        }
        .delete-warning-icon {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 16px;
        }
        .delete-warning-triangle {
            width: 40px;
            height: 40px;
            background: #fff3cd;
            border: 2px solid #ffe066;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            margin: 0 auto;
        }
        .delete-message {
            text-align: center;
            font-size: 20px;
            margin-bottom: 24px;
        }
        .delete-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        .delete-btn {
            background: #f44336;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 10px 24px;
            font-size: 16px;
            font-family: 'Quicksand', sans-serif;
            cursor: pointer;
            transition: background 0.2s;
        }
        .delete-btn:hover {
            background: #d32f2f;
        }
    </style>
</head>
<body>
    <div class="dashboard-page">
     <nav class="navbar">
            <div class="container-fluid">
                <a class="navbar-brand" href="dashboard.html">
                    <img src="images/logoLight.png" width="50px" alt="Logo">
                    <p>&nbsp</p>AlphaWave
                </a>
                <div class="search-container">
                    <input type="text" class="search-input" id="newsSearchInput" placeholder="Search stocks..." autocomplete="off">
                    <i class="fas fa-search search-icon" onclick="performSearch()"></i>
                    <div class="search-results-dropdown" id="searchResultsDropdown">
                        <!-- Search results will be populated here -->
                    </div>
                </div>
                <div class="navbar-right">
                    <!-- Location Selector -->
                    <div class="location-selector-container" style="position: relative;">
                        <button class="location-selector" id="locationSelector" onclick="toggleLocationDropdown()">
                            <span id="currentLocation">Global</span>
                            <i class="fas fa-chevron-down" style="margin-left: 5px; font-size: 10px;"></i>
                        </button>
                        <div class="location-dropdown" id="locationDropdown">
                            <div class="location-option" onclick="changeLocation('US', 'United States', 'USD')">
                                <span class="flag">US</span> United States (USD)
                            </div>
                            <div class="location-option" onclick="changeLocation('EU', 'Europe', 'EUR')">
                                <span class="flag">EU</span> Europe (EUR)
                            </div>
                            <div class="location-option" onclick="changeLocation('GB', 'United Kingdom', 'GBP')">
                                <span class="flag">GB</span> United Kingdom (GBP)
                            </div>
                            <div class="location-option" onclick="changeLocation('JP', 'Japan', 'JPY')">
                                <span class="flag">JP</span> Japan (JPY)
                            </div>
                            <div class="location-option" onclick="changeLocation('CN', 'China', 'CNY')">
                                <span class="flag">CN</span> China (CNY)
                            </div>
                            <div class="location-option" onclick="changeLocation('IN', 'India', 'INR')">
                                <span class="flag">IN</span> India (INR)
                            </div>
                            <div class="location-option" onclick="changeLocation('AU', 'Australia', 'AUD')">
                                <span class="flag">AU</span> Australia (AUD)
                            </div>
                            <div class="location-option" onclick="changeLocation('CA', 'Canada', 'CAD')">
                                <span class="flag">CA</span> Canada (CAD)
                            </div>
                        </div>
                    </div>

                    <!-- Market Status -->
                    <!-- <span class="market-status" id="marketStatus">Market Closed</span> -->

                    <!-- Refresh stocks button -->
                    <button class="refresh-stocks-btn" onclick="refreshStockData()" title="Refresh stock data">
                        <i class="fas fa-sync-alt"></i>
                        Refresh
                    </button>
                    
                    <a href="pro.html" class="pro-badge">Pro</a>
                    <i class="fas fa-bell" id="notificationBell" style="color: white; cursor: pointer;"></i>
                    <div id="messageDropdown" class="message-dropdown" style="display: none;">
                        <div class="message-dropdown-content">
                            <svg width="90" height="90" viewBox="0 0 90 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="45" cy="45" r="45" fill="#444"/>
                                <ellipse cx="45" cy="45" rx="30" ry="22" fill="#444"/>
                                <circle cx="34" cy="50" r="4" fill="#fff"/>
                                <circle cx="45" cy="50" r="4" fill="#fff"/>
                                <circle cx="56" cy="50" r="4" fill="#fff"/>
                            </svg>
                            <div class="message-title">No Notices Right Now!</div>
                            <div class="message-subtext">You are up to date!</div>
                        </div>
                    </div>
                    <div class="user-avatar" onclick="toggleProfileModal()">
                        <img src="images/profilepic.jpg" alt="User">
                    </div>
                </div>
            </div>
        </nav>

         <div class="main-layout">
            <div class="sidebar">
                <ul class="sidebar-nav">
                    <li><a href="dashboard.html">Dashboard</a></li>
                    <li><a href="portfolio.html">Portfolio</a></li>
                    <li><a href="news.html">Latest News</a></li>
                </ul>
            </div>

            <div class="content">
                <h1 class="article-title">Federal Reserve Signals Rate Changes</h1>
                
                <div class="article-container">
                    <div class="article-text">
                        <p class="article-paragraph">
                            The Federal Reserve has signaled potential adjustments to interest rates in 
                            response to shifting economic conditions. Recent data suggest a gradual slowdown 
                            in inflation, prompting speculation that rate cuts could begin later this year.
                            While 
                            no specific timeline was provided, Chair Jerome Powell emphasized the Fed's 
                            commitment to balancing economic growth with price stability.
                        </p>
                        <p class="article-paragraph">
                            Markets reacted cautiously, with investors interpreting the signal as a sign of 
                            potential easing rather than immediate action. The Fed continues to monitor labor 
                            market strength and consumer spending trends, both of which remain resilient despite 
                            elevated rates.
                        </p>
                        <p class="article-paragraph">
                            Analysts suggest that if inflation continues to cool and job numbers remain stable, the 
                            Fed could initiate a modest rate cut in the final quarter of the year. Until then, the 
                            central bank is expected to maintain a data-driven approach, avoiding premature 
                            moves that might reignite inflationary pressures.
                        </p>
                        <p class="article-paragraph">
                            The announcement underscores the Fed's evolving stance as it navigates a post-
                            pandemic economy marked by global uncertainties and shifting fiscal dynamics.
                        </p>
                    </div>
                    
                    <div class="video-container">
                        <div class="video-content">
                            <div class="chart-image">
                                <img src="images/newspic1.jpg" alt="industrial Chart" style="width: 100%; height: 100%; object-fit: cover; border-radius: 10px;" 
                                     onerror="this.style.display='none';">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Modal Overlay -->
    <div class="profile-modal-overlay" id="profileModalOverlay" onclick="closeProfileModal(event)" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.5); z-index: 1000; display: none; opacity: 0; transition: opacity 0.3s ease;">
        <div class="profile-modal" onclick="event.stopPropagation()" style="position: absolute; top: 80px; right: 20px; width: 380px; height: 450px; background: #e8e8e8; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); padding: 20px; font-family: 'Quicksand', sans-serif; transform: translateY(-20px); transition: transform 0.3s ease; display: flex; flex-direction: column; justify-content: space-between;">
            <div class="profile-menu-item" onclick="handleMenuClick('personal-info')" style="display: flex; align-items: center; padding: 8px 0; cursor: pointer; transition: background 0.3s ease; border-radius: 8px; margin-bottom: 2px;">
                <div class="profile-menu-icon" style="width: 35px; height: 35px; border-radius: 50%; background: #666; display: flex; align-items: center; justify-content: center; margin-right: 10px; color: white; font-size: 14px; flex-shrink: 0;">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-menu-text" style="font-size: 14px; font-weight: 500; color: #333; font-family: 'Quicksand', sans-serif;">Personal info</div>
            </div>

            <div class="profile-menu-item" onclick="handleMenuClick('logout')" style="display: flex; align-items: center; padding: 8px 0; cursor: pointer; transition: background 0.3s ease; border-radius: 8px; margin-bottom: 2px;">
                <div class="profile-menu-icon" style="width: 35px; height: 35px; border-radius: 50%; background: #666; display: flex; align-items: center; justify-content: center; margin-right: 10px; color: white; font-size: 14px; flex-shrink: 0;">
                    <i class="fas fa-door-open"></i>
                </div>
                <div class="profile-menu-text" style="font-size: 14px; font-weight: 500; color: #333; font-family: 'Quicksand', sans-serif;">Logout</div>
            </div>

            <div class="profile-menu-item" onclick="handleMenuClick('currency')" style="display: flex; align-items: center; padding: 8px 0; cursor: pointer; transition: background 0.3s ease; border-radius: 8px; margin-bottom: 2px;">
                <div class="profile-menu-icon" style="width: 35px; height: 35px; border-radius: 50%; background: #666; display: flex; align-items: center; justify-content: center; margin-right: 10px; color: white; font-size: 14px; flex-shrink: 0;">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="profile-menu-text" style="font-size: 14px; font-weight: 500; color: #333; font-family: 'Quicksand', sans-serif;">Currency</div>
            </div>

            <div class="profile-menu-item" onclick="handleMenuClick('theme')" style="display: flex; align-items: center; padding: 8px 0; cursor: pointer; transition: background 0.3s ease; border-radius: 8px; margin-bottom: 2px;">
                <div class="profile-menu-icon" style="width: 35px; height: 35px; border-radius: 50%; background: #666; display: flex; align-items: center; justify-content: center; margin-right: 10px; color: white; font-size: 14px; flex-shrink: 0;">
                    <i class="fas fa-sun"></i>
                </div>
                <div class="profile-menu-text" style="font-size: 14px; font-weight: 500; color: #333; font-family: 'Quicksand', sans-serif;">Theme</div>
            </div>

            <div class="profile-menu-item" onclick="handleMenuClick('help')" style="display: flex; align-items: center; padding: 8px 0; cursor: pointer; transition: background 0.3s ease; border-radius: 8px; margin-bottom: 2px;">
                <div class="profile-menu-icon" style="width: 35px; height: 35px; border-radius: 50%; background: #666; display: flex; align-items: center; justify-content: center; margin-right: 10px; color: white; font-size: 14px; flex-shrink: 0;">
                    <i class="fas fa-question-circle"></i>
                </div>
                <div class="profile-menu-text" style="font-size: 14px; font-weight: 500; color: #333; font-family: 'Quicksand', sans-serif;">Help & Support</div>
            </div>

            <div class="profile-menu-item" onclick="handleMenuClick('terms')" style="display: flex; align-items: center; padding: 8px 0; cursor: pointer; transition: background 0.3s ease; border-radius: 8px; margin-bottom: 2px;">
                <div class="profile-menu-icon" style="width: 35px; height: 35px; border-radius: 50%; background: #666; display: flex; align-items: center; justify-content: center; margin-right: 10px; color: white; font-size: 14px; flex-shrink: 0;">
                    <i class="fas fa-file-contract"></i>
                </div>
                <div class="profile-menu-text" style="font-size: 14px; font-weight: 500; color: #333; font-family: 'Quicksand', sans-serif;">Terms of Service</div>
            </div>

            <div class="profile-menu-item" onclick="handleMenuClick('delete-account')" style="display: flex; align-items: center; padding: 8px 0; cursor: pointer; transition: background 0.3s ease; border-radius: 8px; margin-bottom: 2px;">
                <div class="profile-menu-icon" style="width: 35px; height: 35px; border-radius: 50%; background: #666; display: flex; align-items: center; justify-content: center; margin-right: 10px; color: white; font-size: 14px; flex-shrink: 0;">
                    <i class="fas fa-user-times"></i>
                </div>
                <div class="profile-menu-text" style="font-size: 14px; font-weight: 500; color: #333; font-family: 'Quicksand', sans-serif;">Delete your account</div>
            </div>
        </div>
    </div>
    
    <!-- Currency Settings Modal -->
    <div class="currency-modal-overlay" id="currencyModalOverlay" onclick="closeCurrencyModal(event)" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: none; opacity: 0; transition: opacity 0.3s ease;">
        <div class="currency-modal" onclick="event.stopPropagation()" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 400px; background: #fff; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); padding: 32px 28px; font-family: 'Quicksand', sans-serif; color: #111;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                <h2 style="margin: 0; color: #111; font-size: 24px; font-weight: 700; letter-spacing: 0.5px;">Currency Settings</h2>
                <button onclick="closeCurrencyModal()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #111; padding: 5px;">&times;</button>
            </div>
            <div style="margin-bottom: 0;">
                <label for="preferredCurrency" style="display: block; margin-bottom: 10px; color: #111; font-size: 16px; font-weight: 600;">Preferred Currency</label>
                <select id="preferredCurrency" onchange="saveCurrencySettings()" style="width: 100%; padding: 14px; border: 2px solid #111; border-radius: 7px; font-size: 16px; font-family: 'Quicksand', sans-serif; background: #fff; color: #111; font-weight: 500; outline: none;">
                    <option value="USD">USD - US Dollar</option>
                    <option value="EUR">EUR - Euro</option>
                    <option value="GBP">GBP - British Pound</option>
                    <option value="JPY">JPY - Japanese Yen</option>
                    <option value="CNY">CNY - Chinese Yuan</option>
                    <option value="INR">INR - Indian Rupee</option>
                    <option value="AUD">AUD - Australian Dollar</option>
                    <option value="CAD">CAD - Canadian Dollar</option>
                </select>
            </div>
        </div>
    </div>
    
    <!-- Delete Account Confirmation Modal -->
    <div class="delete-modal-overlay" id="deleteModalOverlay" onclick="closeDeleteModal(event)">
        <div class="delete-modal" onclick="event.stopPropagation()">
            <div class="delete-warning-icon">
                <div class="delete-warning-triangle"></div>
            </div>
            <div class="delete-message">
                Are you sure that you<br>want to <strong>delete</strong> your account?
            </div>
            <div class="delete-buttons">
                <button class="delete-btn" onclick="confirmDelete()">Yes</button>
                <button class="delete-btn" onclick="closeDeleteModal()">No</button>
            </div>
        </div>
    </div>
    
    <script>
        // ============================================
        // ENHANCED SEARCH SYSTEM FOR NEWS
        // ============================================
        
        const FINNHUB_API_KEY = 'd1hf3vpr01qsvr29q1qgd1hf3vpr01qsvr29q1r0';
        
        class NewsSearchSystem {
            constructor() {
                this.searchInput = document.getElementById('newsSearchInput');
                this.searchResults = document.getElementById('searchResultsDropdown');
                this.searchTimeout = null;
                this.isSearching = false;
                this.lastQuery = '';
                
                this.initializeSearch();
            }
            
            initializeSearch() {
                console.log('Initializing news search system...');
                
                // Add event listeners
                this.searchInput.addEventListener('input', (e) => this.handleSearchInput(e));
                this.searchInput.addEventListener('keydown', (e) => this.handleKeyDown(e));
                this.searchInput.addEventListener('focus', (e) => this.handleFocus(e));
                this.searchInput.addEventListener('blur', (e) => this.handleBlur(e));
                
                // Close search results when clicking outside
                document.addEventListener('click', (e) => this.handleOutsideClick(e));
                
                console.log('News search system initialized');
            }
            
            handleSearchInput(event) {
                const query = event.target.value.trim();
                
                // Clear previous timeout
                if (this.searchTimeout) {
                    clearTimeout(this.searchTimeout);
                }
                
                // If query is empty, hide results
                if (query.length === 0) {
                    this.hideSearchResults();
                    return;
                }
                
                // If query is too short, don't search
                if (query.length < 2) {
                    return;
                }
                
                // Debounce search requests
                this.searchTimeout = setTimeout(() => {
                    this.performSearch(query);
                }, 300);
            }
            
            handleKeyDown(event) {
                if (event.key === 'Enter') {
                    event.preventDefault();
                    const query = this.searchInput.value.trim();
                    if (query) {
                        this.performSearch(query);
                    }
                } else if (event.key === 'Escape') {
                    this.hideSearchResults();
                    this.searchInput.blur();
                }
            }
            
            handleFocus(event) {
                // Show results if there's a query and results exist
                if (this.searchInput.value.trim() && this.searchResults.children.length > 0) {
                    this.showSearchResults();
                }
            }
            
            handleBlur(event) {
                // Delay hiding to allow clicks on results
                setTimeout(() => {
                    if (!this.searchResults.matches(':hover')) {
                        this.hideSearchResults();
                    }
                }, 150);
            }
            
            handleOutsideClick(event) {
                if (!this.searchInput.contains(event.target) && 
                    !this.searchResults.contains(event.target)) {
                    this.hideSearchResults();
                }
            }
            
            async performSearch(query) {
                if (this.isSearching || query === this.lastQuery) {
                    return;
                }
                
                this.isSearching = true;
                this.lastQuery = query;
                
                console.log('Searching for:', query);
                
                // Show loading state
                this.showLoadingState();
                
                try {
                    const results = await this.searchCompanies(query);
                    this.displaySearchResults(results, query);
                } catch (error) {
                    console.error('Search error:', error);
                    this.showErrorState();
                } finally {
                    this.isSearching = false;
                }
            }
            
            async searchCompanies(query) {
                const url = `https://finnhub.io/api/v1/search?q=${encodeURIComponent(query)}&token=${FINNHUB_API_KEY}`;
                
                try {
                    const response = await fetch(url);
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    console.log('Search results:', data);
                    
                    if (data.result && data.result.length > 0) {
                        return data.result.slice(0, 8); // Limit to 8 results
                    }
                    
                    return [];
                } catch (error) {
                    console.error('Error searching companies:', error);
                    throw error;
                }
            }
            
            displaySearchResults(results, query) {
                if (results.length === 0) {
                    this.showNoResultsState(query);
                    return;
                }
                
                const resultsHTML = results.map(result => this.createResultHTML(result)).join('');
                
                this.searchResults.innerHTML = resultsHTML;
                this.showSearchResults();
                
                // Add click handlers to results
                this.searchResults.querySelectorAll('.search-result-item').forEach(item => {
                    item.addEventListener('click', (e) => this.handleResultClick(e, item));
                });
            }
            
            createResultHTML(result) {
                const { symbol, description, displaySymbol, type } = result;
                const exchange = result.exchange || '';
                
                return `
                    <div class="search-result-item" data-symbol="${symbol}" data-description="${description}">
                        <div class="search-result-info">
                            <div class="search-result-name">${description || symbol}</div>
                            <div class="search-result-symbol">${symbol}${displaySymbol && displaySymbol !== symbol ? ` (${displaySymbol})` : ''}</div>
                        </div>
                        ${exchange ? `<div class="search-result-exchange">${exchange}</div>` : ''}
                    </div>
                `;
            }
            
            handleResultClick(event, item) {
                const symbol = item.dataset.symbol;
                const description = item.dataset.description;
                
                console.log('Selected stock:', symbol, description);
                
                // Update search input with selected value
                this.searchInput.value = `${description} (${symbol})`;
                
                // Hide search results
                this.hideSearchResults();
                
                // Navigate to stock detail page or show stock info
                this.navigateToStock(symbol, description);
            }
            
            navigateToStock(symbol, description) {
                // For specific stocks, navigate to their detail pages
                if (symbol === 'AAPL') {
                    window.location.href = 'apple-stock-detail.html';
                } else if (symbol === 'GOOGL' || symbol === 'GOOG') {
                    window.location.href = 'stock-detail.html';
                } else {
                    // For other stocks, you could:
                    // 1. Navigate to a general stock detail page with the symbol as parameter
                    // 2. Show a modal with stock information
                    // 3. Navigate to the search-company page with the symbol
                    
                    // Option 3: Navigate to search-company page
                    window.location.href = `search-company.html?company=${encodeURIComponent(symbol)}`;
                }
            }
            
            showLoadingState() {
                this.searchResults.innerHTML = `
                    <div class="search-loading">
                        <i class="fas fa-spinner fa-spin"></i> Searching...
                    </div>
                `;
                this.showSearchResults();
            }
            
            showNoResultsState(query) {
                this.searchResults.innerHTML = `
                    <div class="search-no-results">
                        No results found for "${query}"
                        <br><small>Try searching by company name or stock symbol</small>
                    </div>
                `;
                this.showSearchResults();
            }
            
            showErrorState() {
                this.searchResults.innerHTML = `
                    <div class="search-error">
                        Search temporarily unavailable
                        <br><small>Please try again in a moment</small>
                    </div>
                `;
                this.showSearchResults();
            }
            
            showSearchResults() {
                this.searchResults.classList.add('show');
            }
            
            hideSearchResults() {
                this.searchResults.classList.remove('show');
            }
            
            clearSearch() {
                this.searchInput.value = '';
                this.hideSearchResults();
                this.lastQuery = '';
            }
        }
        
        // Global search function for the search icon
        function performSearch() {
            const query = document.getElementById('newsSearchInput').value.trim();
            if (query && window.newsSearch) {
                window.newsSearch.performSearch(query);
            }
        }

        // --- BEGIN: SimpleLocationService (copied from dashboard.html) ---
        class SimpleLocationService {
            constructor() {
                this.currentLocation = this.loadLocationSettings();
                this.hasAskedForLocation = false;
                this.exchangeRates = {
                    'USD': 1, 'EUR': 0.85, 'GBP': 0.73, 'JPY': 110,
                    'CNY': 6.45, 'INR': 74.5, 'AUD': 1.35, 'CAD': 1.25
                };
            }
            init() {
                this.updateLocationDisplay();
                this.updateMarketStatus();
                setInterval(() => this.updateMarketStatus(), 60000);
            }
            loadLocationSettings() {
                const stored = localStorage.getItem('alphawave_location_settings');
                if (stored) {
                    try { return JSON.parse(stored); } catch (e) {}
                }
                return { country: 'US', currency: 'USD', label: 'Global' };
            }
            saveLocationSettings() {
                localStorage.setItem('alphawave_location_settings', JSON.stringify(this.currentLocation));
            }
            setLocation(country, label, currency) {
                this.currentLocation = { country, currency, label };
                this.saveLocationSettings();
                this.updateLocationDisplay();
                this.updateMarketStatus();
                window.dispatchEvent(new CustomEvent('locationChanged', { detail: this.currentLocation }));
            }
            updateLocationDisplay() {
                const locationElement = document.getElementById('currentLocation');
                if (locationElement) {
                    locationElement.textContent = this.currentLocation.label;
                }
            }
            updateMarketStatus() {
                const timezone = this.getTimezoneForCountry(this.currentLocation.country);
                const status = this.getMarketStatus(timezone);
                const statusElement = document.getElementById('marketStatus');
                if (statusElement) {
                    statusElement.textContent = status.isOpen ? 'Market Open' : 'Market Closed';
                    statusElement.className = `market-status ${status.isOpen ? 'open' : 'closed'}`;
                }
            }
            getTimezoneForCountry(country) {
                const timezones = {
                    'US': 'America/New_York', 'EU': 'Europe/London', 'GB': 'Europe/London',
                    'JP': 'Asia/Tokyo', 'CN': 'Asia/Shanghai', 'IN': 'Asia/Kolkata',
                    'AU': 'Australia/Sydney', 'CA': 'America/Toronto'
                };
                return timezones[country] || 'America/New_York';
            }
            getMarketStatus(timezone) {
                try {
                    const now = new Date();
                    const marketTime = new Intl.DateTimeFormat('en-US', {
                        timeZone: timezone, hour: 'numeric', minute: 'numeric', hour12: false
                    }).formatToParts(now);
                    const hour = parseInt(marketTime.find(part => part.type === 'hour').value);
                    const minute = parseInt(marketTime.find(part => part.type === 'minute').value);
                    const currentTime = hour * 60 + minute;
                    const marketOpen = 9 * 60 + 30; // 9:30 AM
                    const marketClose = 16 * 60; // 4:00 PM
                    const isWeekday = now.getDay() >= 1 && now.getDay() <= 5;
                    const isOpen = isWeekday && currentTime >= marketOpen && currentTime < marketClose;
                    return { isOpen };
                } catch (error) {
                    return { isOpen: false };
                }
            }
        }
        // --- END: SimpleLocationService ---

        // --- BEGIN: Refresh function ---
        function refreshStockData() {
            // You can implement real refresh logic here if needed
            const btn = document.querySelector('.refresh-stocks-btn');
            if (btn) {
                btn.classList.add('loading');
                btn.disabled = true;
                setTimeout(() => {
                    btn.classList.remove('loading');
                    btn.disabled = false;
                }, 1000);
            }
        }
        // --- END: Refresh function ---

        // --- BEGIN: Profile menu handler ---
        function handleMenuClick(action) {
            console.log('Menu action:', action);
            
            switch(action) {
                case 'logout':
                    closeProfileModal();
                    setTimeout(() => {
                        window.authSystem.logout();
                    }, 300);
                    break;
                    
                case 'delete-account':
                    closeProfileModal();
                    setTimeout(() => {
                        showDeleteModal();
                    }, 300);
                    break;
                    
                case 'personal-info':
                    window.authSystem.showMessage('Personal info page not implemented yet', 'info');
                    closeProfileModal();
                    break;
                    
                case 'currency':
                    showCurrencySettingsModal();
                    closeProfileModal();
                    break;
                    
                case 'theme':
                    window.authSystem.showMessage('Theme settings not implemented yet', 'info');
                    closeProfileModal();
                    break;
                    
                case 'help':
                    window.authSystem.showMessage('Help & Support not implemented yet', 'info');
                    closeProfileModal();
                    break;
                    
                case 'terms':
                    window.authSystem.showMessage('Terms of Service not implemented yet', 'info');
                    closeProfileModal();
                    break;
                    
                default:
                    closeProfileModal();
            }
        }
        // --- END: Profile menu handler ---

        // Location dropdown functions
        function toggleLocationDropdown() {
            const dropdown = document.getElementById('locationDropdown');
            if (dropdown) {
                dropdown.classList.toggle('show');
            }
        }

        function changeLocation(country, label, currency) {
            // Update active selection
            const options = document.querySelectorAll('.location-option');
            options.forEach(option => option.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Close dropdown
            toggleLocationDropdown();
            
            // Update location
            if (window.locationService) {
                window.locationService.setLocation(country, label, currency);
                
                // Show updating indicator
                const selector = document.getElementById('currentLocation');
                const originalText = selector.textContent;
                selector.textContent = 'Updating...';
                
                setTimeout(() => {
                    selector.textContent = label;
                }, 1000);
            }
        }

        // Profile Modal Functions
        function toggleProfileModal() {
            const overlay = document.getElementById('profileModalOverlay');
            if (overlay) {
                if (overlay.style.display === 'flex') {
                    closeProfileModal();
                } else {
                    openProfileModal();
                }
            }
        }

        function openProfileModal() {
            const overlay = document.getElementById('profileModalOverlay');
            if (overlay) {
                overlay.style.display = 'flex';
                overlay.style.opacity = '1';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeProfileModal(event) {
            if (event && event.target !== event.currentTarget) {
                return;
            }
            
            const overlay = document.getElementById('profileModalOverlay');
            if (overlay) {
                overlay.style.display = 'none';
                overlay.style.opacity = '0';
                document.body.style.overflow = 'auto';
            }
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize search system first
            window.newsSearch = new NewsSearchSystem();
            
            // Initialize location service
            window.locationService = new SimpleLocationService();
            window.locationService.init();
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('locationDropdown');
            const selector = document.getElementById('locationSelector');
            
            if (dropdown && selector && 
                !dropdown.contains(event.target) && 
                !selector.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Close modals when pressing Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeProfileModal();
                const dropdown = document.getElementById('locationDropdown');
                if (dropdown) {
                    dropdown.classList.remove('show');
                }
                
                // Close search results
                if (window.newsSearch) {
                    window.newsSearch.hideSearchResults();
                }
            }
        });

        // Currency settings logic (shared with dashboard)
        let currencySettings = {
            preferredCurrency: 'USD',
            exchangeRates: {
                'USD': 1,
                'EUR': 0.85,
                'GBP': 0.73,
                'JPY': 110,
                'CNY': 6.45,
                'INR': 74.5,
                'AUD': 1.35,
                'CAD': 1.25
            }
        };
        function loadCurrencySettings() {
            const stored = localStorage.getItem('alphawave_currency_settings');
            if (stored) {
                try {
                    const settings = JSON.parse(stored);
                    currencySettings = { ...currencySettings, ...settings };
                } catch (error) {
                    console.warn('Error loading currency settings:', error);
                }
            }
        }
        function saveCurrencySettingsToStorage() {
            localStorage.setItem('alphawave_currency_settings', JSON.stringify(currencySettings));
        }
        function showCurrencySettingsModal() {
            loadCurrencySettings();
            document.getElementById('preferredCurrency').value = currencySettings.preferredCurrency;
            const modal = document.getElementById('currencyModalOverlay');
            modal.style.display = 'block';
            setTimeout(() => {
                modal.style.opacity = '1';
            }, 10);
        }
        function closeCurrencyModal(event) {
            if (event && event.target.id !== 'currencyModalOverlay') {
                return;
            }
            const modal = document.getElementById('currencyModalOverlay');
            modal.style.opacity = '0';
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }
        function saveCurrencySettings() {
            const preferredCurrency = document.getElementById('preferredCurrency').value;
            currencySettings.preferredCurrency = preferredCurrency;
            saveCurrencySettingsToStorage();
            // Update location service if it exists
            if (window.locationService) {
                window.locationService.currentLocation.currency = preferredCurrency;
                window.locationService.saveLocationSettings();
                window.locationService.updatePortfolioValue && window.locationService.updatePortfolioValue();
            }
            // Show a message (optional)
            if (window.authSystem && window.authSystem.showMessage) {
                window.authSystem.showMessage('Currency settings saved!', 'success');
            }
            closeCurrencyModal();
        }
        // Make modal functions global
        window.showCurrencySettingsModal = showCurrencySettingsModal;

        function showDeleteModal() {
            const overlay = document.getElementById('deleteModalOverlay');
            overlay.classList.add('show');
            document.body.style.overflow = 'hidden';
        }
        function closeDeleteModal(event) {
            if (event && event.target !== event.currentTarget) {
                return;
            }
            const overlay = document.getElementById('deleteModalOverlay');
            overlay.classList.remove('show');
            document.body.style.overflow = 'auto';
        }
        function confirmDelete() {
            try {
                window.authSystem.deleteAccount();
                window.authSystem.showMessage('Account deleted successfully', 'success');
                setTimeout(() => { window.location.href = 'index.html'; }, 2000);
            } catch (error) {
                window.authSystem.showMessage(error.message, 'error');
            }
            closeDeleteModal();
        }
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeDeleteModal();
            }
        });
    </script>
</body>
</html>